# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ2 "–†–∞–±–æ—Ç–∞ —Å Kubernetes"

## –í—ã–ø–æ–ª–Ω–∏–ª–∏:

–ë–µ–≤–∑ –¢–∏–º–æ—Ñ–µ–π K34201, –ó–∞–≥–∞–π–Ω–æ–≤–∞ –ö—Ä–∏—Å—Ç–∏–Ω–∞ K34201, –ë–ª–æ—Ö–∏–Ω–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è K34201, –ë–∞–ª–∞—à–æ–≤ –ú–∞—Ç–≤–µ–π K34201

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã:

–ò–∑—É—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ Kubernetes –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ.

## –ó–∞–¥–∞—á–∏:

- –ü–æ–¥–Ω—è—Ç—å Kubernetes –∫–ª–∞—Å—Ç–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ
- –°–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ Docker Hub
- –ù–∞–ø–∏—Å–∞—Ç—å YAML-—Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞

## –•–æ–¥ —Ä–∞–±–æ—Ç—ã

–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è:

- Docker Engine ‚Äì –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ Docker –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- kuberctl ‚Äì –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ Kubernetes
- Minikube ‚Äì –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Kubernetes –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞

–ù–∞–ø–∏—à–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å. –í–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π Dockerfile:

```
FROM nginx:alpine

COPY . /usr/share/nginx/html/

CMD ["nginx", "-g", "daemon off;"]

```

### –†–∞–±–æ—Ç–∞ —Å minikube

–°–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Ç–µ—Ä minikube

> minikube start

<br>![](./img/1.jpg)<br/>

–°–æ–∑–¥–∞–¥–∏–º YAML-—Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—à–µ–º Deployment ‚Äì —Ä–µ—Å—É—Ä—Å Kubernetes, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –û–Ω —è—è–ª—è–µ—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º —Å–ø–æ—Å–æ–±–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–æ–≤

```

apiVersion: apps/v1
kind: Deployment
metadata:
  name: weatherapp-deployment
spec:
  replicas: 2
  selector:
    matchLabels:
      app: weatherapp
  template:
    metadata:
      labels:
        app: weatherapp
    spec:
      containers:
      - name: weatherapp
        image: risen73/weather
        ports:
        - containerPort: 8081

```

–í –∫–æ—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –º—ã –∑–∞–¥–∞–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ (2 —à—Ç—É–∫–∏) –∏ –º–µ—Ç–∫–∏ –¥–ª—è –ø–æ–¥–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω—É.

–ü—Ä–∏–º–µ–Ω–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

> kubectl apply -f deployment.yaml

–í –Ω–∞—à–µ–º –∫–ª–∞—Å—Ç–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å 2 –ø–æ–¥–∞:

> kubectl get pods

<br>![](./img/2.jpg)<br/>

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø–æ –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É IP-–∞–¥—Ä–µ—Å—É –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes. –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤–Ω–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ Kubernetes, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥ –∫–∞–∫ Service Kubernetes. –°–æ–∑–¥–∞–¥–∏–º YAML-—Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ–≥–æ –æ–ø–∏—à–µ–º

```

apiVersion: v1
kind: Service
metadata:
 name: weatherapp-service
spec:
  selector:
    app: weatherapp
  type: NodePort
  ports:
  - name: http
    port: 80
    targetPort: 80
    nodePort: 30036
    protocol: TCP

```

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞ NodePort, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –ø—Ä–æ—Å—Ç–æ—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ —É –Ω–∞—Å –Ω–µ—Ç

–ü—Ä–∏–º–µ–Ω–∏–º:

> kubectl apply -f service.yaml

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏–º —Å–µ—Ä–≤–∏—Å –∏ –∏ –±—É–¥–µ–º –Ω–∞–¥–µ—è—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç ü§û

> minikube service weatherapp-service

<br>![](./img/3.jpg)<br/>

–û—Ç–∫—Ä–æ–µ–º –±—Ä–∞—É–∑–µ—Ä. –£—Ä–∞, –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

<br>![](./img/4.gif)<br/>

## –í—ã–≤–æ–¥:

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –∏–∑—É—á–µ–Ω—ã —Ä–µ—Å—É—Ä—Å—ã Kubernetes –∏ –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞–≤—ã–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ.
